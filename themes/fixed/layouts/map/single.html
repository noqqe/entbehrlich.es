{{ partial "header.html" . }}
   <style>#map { height: 500px; }</style>

    <div class="content">
        <div class="main">
        <h1 class="non-highlight"><a href="{{ .Permalink }}">{{ .Title }}</a></h1>

        <div id="map"></div>
        <script>
            var map = L.map('map').setView([0, 0], 1);
            L.tileLayer('https://{s}.tile.openstreetmap.de/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
            </script>
            <script>
                var podcastIcon = L.icon({
                    iconUrl: '/img/marker-podcast.png',
                    iconSize: [36, 36],
                    iconAnchor: [18, 18],
                    popupAnchor: [0, -18],
                 });
                 var articleIcon = L.icon({
                    iconUrl: '/img/marker-article.png',
                    iconSize: [36, 36],
                    iconAnchor: [18, 18],
                    popupAnchor: [0, -18],
                 });

                var markers = L.markerClusterGroup();
                {{ range ( where .Site.Pages "Type" "post") }} {{ if isset .Params "latitude" }}
                    markers.addLayer(
                        L.marker([{{ .Params.latitude }}, {{ .Params.longitude}}], 
                        {{ if .Params.podcast }}
                            {icon: podcastIcon}
                        {{ else }}
                            {icon: articleIcon}
                        {{ end }}
                        )
                        .bindPopup('<a href="{{ .Permalink }}">{{.Title}}</a>'));
                {{ end }} {{ end }}
                map.addLayer(markers);
            </script>
        </div>
   </div>

{{ partial "footer.html" . }}
